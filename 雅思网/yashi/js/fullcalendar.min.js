(function(g){"function"===typeof define&&define.amd?define(["jquery","moment"],g):g(jQuery,moment)})(function(g,p){function la(a){O(P,a)}function O(a){function b(b,c){g.isPlainObject(c)&&g.isPlainObject(a[b])&&!/(Time|Duration)$/.test(b)?a[b]=O({},a[b],c):void 0!==c&&(a[b]=c)}for(var c=1;c<arguments.length;c++)g.each(arguments[c],b);return a}function ma(a){var b=p.localeData||p.langData;return b.call(p,a)||b.call(p,"en")}function na(a,b){b.left&&a.css({"border-left-width":1,"margin-left":b.left-1});
b.right&&a.css({"border-right-width":1,"margin-right":b.right-1})}function oa(a){a.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function T(){g("body").addClass("fc-not-allowed")}function I(){g("body").removeClass("fc-not-allowed")}function pa(a,b,c){var d=Math.floor(b/a.length),e=Math.floor(b-d*(a.length-1)),f=[],h=[],l=[],n=0;a.height("");a.each(function(b,c){var x=b===a.length-1?e:d,m=g(c).outerHeight(!0);m<x?(f.push(c),h.push(m),l.push(g(c).height())):
n+=m});c&&(b-=n,d=Math.floor(b/f.length),e=Math.floor(b-d*(f.length-1)));g(f).each(function(a,b){var c=a===f.length-1?e:d,m=h[a],n=c-(m-l[a]);m<c&&g(b).height(n)})}function qa(a){var b=0;a.find("> *").each(function(a,d){var e=g(d).outerWidth();e>b&&(b=e)});b++;a.width(b);return b}function ra(a,b){a.height(b).addClass("fc-scroller");if(a[0].scrollHeight-1>a[0].clientHeight)return!0;aa(a);return!1}function aa(a){a.height("").removeClass("fc-scroller")}function sa(a){var b=a.css("position"),c=a.parents().filter(function(){var a=
g(this);return/(auto|scroll)/.test(a.css("overflow")+a.css("overflow-y")+a.css("overflow-x"))}).eq(0);return"fixed"!==b&&c.length?c:g(a[0].ownerDocument||document)}function ta(a){var b=a.offset().left,c=b+a.width(),d=a.children();a=d.offset().left;d=a+d.outerWidth();return{left:a-b,right:c-d}}function ba(a,b){var c=a.start,d=a.end,e=b.start,f=b.end;if(d>e&&c<f)return c>=e?(c=c.clone(),e=!0):(c=e.clone(),e=!1),d<=f?(d=d.clone(),f=!0):(d=f.clone(),f=!1),{start:c,end:d,isStart:e,isEnd:f}}function R(a,
b){a=a||{};if(void 0!==a[b])return a[b];for(var c=b.split(/(?=[A-Z])/),d=c.length-1,e;0<=d;d--)if(e=a[c[d].toLowerCase()],void 0!==e)return e;return a["default"]}function S(a,b){return p.duration({days:a.clone().stripTime().diff(b.clone().stripTime(),"days"),ms:a.time()-b.time()})}function Sa(a,b){return p.duration({days:a.clone().stripTime().diff(b.clone().stripTime(),"days")})}function ua(a,b){var c,d;for(c=0;c<va.length&&(d=va[c],!ca(d,a,b));c++);return d}function ca(a,b,c){a=null!=c?c.diff(b,
a,!0):p.isDuration(b)?b.as(a):b.end.diff(b.start,a,!0);return 1<=a&&0===a%1?a:!1}function wa(a){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(a)}function U(a){var b=function(){};b.prototype=a;return new b}function da(a,b){for(var c in a)xa.call(a,c)&&(b[c]=a[c])}function Ta(a,b){var c=["constructor","toString","valueOf"],d,e;for(d=0;d<c.length;d++)e=c[d],a[e]!==Object.prototype[e]&&(b[e]=a[e])}function V(a,b,c){g.isFunction(a)&&(a=[a]);if(a){var d,e;for(d=0;d<a.length;d++)e=a[d].apply(b,c)||e;return e}}
function K(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}function z(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function ya(a){return a.charAt(0).toUpperCase()+a.slice(1)}function Ua(a,b){return a-b}function ea(a,b){var c,d,e,f,h=function(){var g=+new Date-f;g<b&&0<g?c=setTimeout(h,b-g):(c=null,a.apply(e,d),c||(e=d=null))};return function(){e=this;d=arguments;
f=+new Date;c||(c=setTimeout(h,b))}}function fa(a,b,c){var d=a[0],e=1==a.length&&"string"===typeof d,f,h,l;if(p.isMoment(d))a=p.apply(null,a),za(d,a);else if(f=d,"[object Date]"===Object.prototype.toString.call(f)||f instanceof Date||void 0===d)a=p.apply(null,a);else{h=f=!1;if(e)if(Va.test(d))d+="-01",a=[d],h=f=!0;else{if(l=Wa.exec(d))f=!l[5],h=!0}else g.isArray(d)&&(h=!0);a=b||f?p.utc.apply(p,a):p.apply(null,a);f?(a._ambigTime=!0,a._ambigZone=!0):c&&(h?a._ambigZone=!0:e&&a.zone(d))}a._fullCalendar=
!0;return a}function ga(a,b){var c=!1,d=!1,e=a.length,f=[],h,g;for(h=0;h<e;h++)g=a[h],p.isMoment(g)||(g=r.moment.parseZone(g)),c=c||g._ambigTime,d=d||g._ambigZone,f.push(g);for(h=0;h<e;h++)g=f[h],b||!c||g._ambigTime?d&&!g._ambigZone&&(f[h]=g.clone().stripZone()):f[h]=g.clone().stripTime();return f}function za(a,b){a._ambigTime?b._ambigTime=!0:b._ambigTime&&(b._ambigTime=!1);a._ambigZone?b._ambigZone=!0:b._ambigZone&&(b._ambigZone=!1)}function Aa(a,b){a.year(b[0]||0).month(b[1]||0).date(b[2]||0).hours(b[3]||
0).minutes(b[4]||0).seconds(b[5]||0).milliseconds(b[6]||0)}function G(a,b){return u.format.call(a,b)}function Ba(a,b){var c="",d;for(d=0;d<b.length;d++)c+=ha(a,b[d]);return c}function ha(a,b){var c;return"string"===typeof b?b:(c=b.token)?Ca[c]?Ca[c](a):G(a,c):b.maybe&&(c=Ba(a,b.maybe),c.match(/[1-9]/))?c:""}function Da(a,b,c,d,e){a=r.moment.parseZone(a);b=r.moment.parseZone(b);c=(a.localeData||a.lang).call(a).longDateFormat(c)||c;d=d||" - ";c=Ea(c);var f,h,g="",n,k="",w="",x="",m="";for(h=0;h<c.length;h++){f=
Fa(a,b,c[h]);if(!1===f)break;g+=f}for(n=c.length-1;n>h;n--){f=Fa(a,b,c[n]);if(!1===f)break;k=f+k}for(f=h;f<=n;f++)w+=ha(a,c[f]),x+=ha(b,c[f]);if(w||x)m=e?x+d+w:w+d+x;return g+m+k}function Fa(a,b,c){var d;return"string"===typeof c?c:(c=c.token)&&(d=Xa[c.charAt(0)])&&a.isSame(b,d)?G(a,c):!1}function Ea(a){return a in ia?ia[a]:ia[a]=Ga(a)}function Ga(a){for(var b=[],c=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g,d;d=c.exec(a);)d[1]?b.push(d[1]):d[2]?b.push({maybe:Ga(d[2])}):d[3]?b.push({token:d[3]}):
d[5]&&b.push(d[5]);return b}function E(){}function Ha(a,b){return a||b?a&&b?a.grid===b.grid&&a.row===b.row&&a.col===b.col:!1:!0}function Ia(a){return K((a.source||{}).rendering,a.rendering)}function Ya(a){var b={},c,d;for(c=0;c<a.length;c++)d=a[c],(b[d._id]||(b[d._id]=[])).push(d);return b}function Za(a,b){return a.eventStartMS-b.eventStartMS}function W(a,b){return a.eventStartMS-b.eventStartMS||b.eventDurationMS-a.eventDurationMS||b.event.allDay-a.event.allDay||(a.event.title||"").localeCompare(b.event.title)}
function $a(a){var b=r.dataAttrPrefix,c,d,e,f;b&&(b+="-");if(c=a.data(b+"event")||null)c="object"===typeof c?g.extend({},c):{},d=c.start,null==d&&(d=c.time),e=c.duration,f=c.stick,delete c.start,delete c.time,delete c.duration,delete c.stick;null==d&&(d=a.data(b+"start"));null==d&&(d=a.data(b+"time"));null==e&&(e=a.data(b+"duration"));null==f&&(f=a.data(b+"stick"));d=null!=d?p.duration(d):null;e=null!=e?p.duration(e):null;f=Boolean(f);return{eventProps:c,startTime:d,duration:e,stick:f}}function ab(a,
b){return a.leftCol-b.leftCol}function Ja(a){var b=a.forwardSegs,c=0,d,e;if(void 0===a.forwardPressure){for(d=0;d<b.length;d++)e=b[d],Ja(e),c=Math.max(c,1+e.forwardPressure);a.forwardPressure=c}}function ja(a,b,c){var d=a.forwardSegs;if(void 0===a.forwardCoord)for(d.length?(d.sort(bb),ja(d[0],b+1,c),a.forwardCoord=d[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-c)/(b+1),b=0;b<d.length;b++)ja(d[b],0,a.forwardCoord)}function Ka(a,b,c){c=c||[];for(var d=0;d<b.length;d++){var e=
b[d];a.bottom>e.top&&a.top<e.bottom&&c.push(b[d])}return c}function bb(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||W(a,b)}function cb(a,b){function c(){return a.is(":visible")}function d(a){H++;s&&a&&s.type!==a&&(y.deactivateButton(s.type),w(),s.start&&s.destroyView(),s.el.remove(),s=null);if(!s&&a){var b=e(a);s=new b["class"](m,b.options,a);s.el=g("<div class='fc-view fc-"+a+"-view' />").appendTo(D);y.activateButton(a)}s&&(A=s.massageCurrentDate(A),
s.start&&A.isWithin(s.intervalStart,s.intervalEnd)||!c()||(w(),s.start&&s.destroyView(),s.setDate(A),s.renderView(),x(),s.updateTitle(),y.updateTitle(s.title),m.getNow().isWithin(s.intervalStart,s.intervalEnd)?y.disableButton("today"):y.enableButton("today"),!q.lazyFetching||X(s.start,s.end)?z(s.start,s.end):k()));x();H--}function e(a){function b(a){"function"===typeof a?m=a:"object"===typeof a&&g.extend(l,a)}var c=q.defaultButtonText||{},d=q.buttonText||{},e=q.views||{},f=a,h=[],l,m,k,n=!1;if(v[a])return v[a];
for(;f&&!m;)l={},b(J[f]),b(e[f]),h.unshift(l),f=l.type;h.unshift({});l=g.extend.apply(g,h);if(m){if(f=l.duration||m.duration)f=p.duration(f),k=ua(f),n=1===ca(k,f);n&&e[k]&&(l=g.extend({},e[k],l));c=d[a]||(n?d[k]:null)||c[a]||(n?c[k]:null)||l.buttonText||m.buttonText||(f?(f.locale||f.lang).call(f,q.lang).humanize():null)||a;return v[a]={"class":m,options:l,buttonText:c}}}function f(a){return Boolean(e(a))}function h(a){if(c())return a&&l(),H++,s.updateSize(!0),H--,!0}function l(){u="number"===typeof q.contentHeight?
q.contentHeight:"number"===typeof q.height?q.height-(t?t.outerHeight(!0):0):Math.round(D.width()/Math.max(q.aspectRatio,.5))}function n(a){!H&&a.target===window&&s.start&&h(!0)&&s.trigger("windowResize",La)}function k(){c()&&(w(),s.destroyViewEvents(),s.renderViewEvents(B),x())}function w(){D.css({width:"100%",height:D.height(),overflow:"hidden"})}function x(){D.css({width:"",height:"",overflow:""})}var m=this;b=b||{};var q=O({},P,b),Q;(Q=q.lang in N?N[q.lang]:N[P.lang])&&(q=O({},P,Q,b));q.isRTL&&
(q=O({},P,db,Q||{},b));m.options=q;m.render=function(b){D?c()&&(c()&&l(),d(b)):(a.addClass("fc"),q.isRTL?a.addClass("fc-rtl"):a.addClass("fc-ltr"),q.theme?a.addClass("ui-widget"):a.addClass("fc-unthemed"),D=g("<div class='fc-view-container'/>").prependTo(a),y=new eb(m,q),(t=y.render())&&a.prepend(t),d(q.defaultView),q.handleWindowResize&&(F=ea(n,q.windowResizeDelay),g(window).resize(F)))};m.destroy=function(){s&&s.destroyView();y.destroy();D.remove();a.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget");
g(window).unbind("resize",F)};m.refetchEvents=function(){w();s.destroyViewEvents();x();z(s.start,s.end)};m.reportEvents=function(a){B=a;k()};m.reportEventChange=function(){k()};m.rerenderEvents=k;m.changeView=d;m.select=function(a,b){a=m.moment(a);b=b?m.moment(b):a.hasTime()?a.clone().add(m.defaultTimedEventDuration):a.clone().add(m.defaultAllDayEventDuration);s.select({start:a,end:b})};m.unselect=function(){s&&s.unselect()};m.prev=function(){A=s.computePrevDate(A);d()};m.next=function(){A=s.computeNextDate(A);
d()};m.prevYear=function(){A.add(-1,"years");d()};m.nextYear=function(){A.add(1,"years");d()};m.today=function(){A=m.getNow();d()};m.gotoDate=function(a){A=m.moment(a);d()};m.incrementDate=function(a){A.add(p.duration(a));d()};m.zoomTo=function(a,b){var c,e;b&&f(b)||(b=b||"day",c=y.getViewsWithButtons().join(" "),(e=c.match(new RegExp("\\w+"+ya(b))))||(e=c.match(/\w+Day/)),b=e?e[0]:"agendaDay");A=a;d(b)};m.getDate=function(){return A.clone()};m.getCalendar=function(){return m};m.getView=function(){return s};
m.option=function(a,b){if(void 0===b)return q[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)q[a]=b,h(!0)};m.trigger=function(a,b){if(q[a])return q[a].apply(b||La,Array.prototype.slice.call(arguments,2))};m.isValidViewType=f;m.getViewButtonText=function(a){if(a=e(a))return a.buttonText};var L=U(ma(q.lang));q.monthNames&&(L._months=q.monthNames);q.monthNamesShort&&(L._monthsShort=q.monthNamesShort);q.dayNames&&(L._weekdays=q.dayNames);q.dayNamesShort&&(L._weekdaysShort=q.dayNamesShort);null!=
q.firstDay&&(Q=U(L._week),Q.dow=q.firstDay,L._week=Q);m.defaultAllDayEventDuration=p.duration(q.defaultAllDayEventDuration);m.defaultTimedEventDuration=p.duration(q.defaultTimedEventDuration);m.moment=function(){var a;"local"===q.timezone?(a=r.moment.apply(null,arguments),a.hasTime()&&a.local()):a="UTC"===q.timezone?r.moment.utc.apply(null,arguments):r.moment.parseZone.apply(null,arguments);"_locale"in a?a._locale=L:a._lang=L;return a};m.getIsAmbigTimezone=function(){return"local"!==q.timezone&&"UTC"!==
q.timezone};m.rezoneDate=function(a){return m.moment(a.toArray())};m.getNow=function(){var a=q.now;"function"===typeof a&&(a=a());return m.moment(a)};m.calculateWeekNumber=function(a){var b=q.weekNumberCalculation;if("function"===typeof b)return b(a);if("local"===b)return a.week();if("ISO"===b.toUpperCase())return a.isoWeek()};m.getEventEnd=function(a){return a.end?a.end.clone():m.getDefaultEventEnd(a.allDay,a.start)};m.getDefaultEventEnd=function(a,b){var c=b.clone();a?c.stripTime().add(m.defaultAllDayEventDuration):
c.add(m.defaultTimedEventDuration);m.getIsAmbigTimezone()&&c.stripZone();return c};fb.call(m,q);var X=m.isFetchNeeded,z=m.fetchEvents,La=a[0],y,t,D,v={},s,u,F,H=0,A,B=[];A=null!=q.defaultDate?m.moment(q.defaultDate):m.getNow();m.getSuggestedViewHeight=function(){void 0===u&&c()&&l();return u};m.isHeightAuto=function(){return"auto"===q.contentHeight||"auto"===q.height}}function eb(a,b){function c(c){var d=g('<div class="fc-'+c+'"/>');(c=b.header[c])&&g.each(c.split(" "),function(c){var h=g(),w=!0;
g.each(this.split(","),function(c,d){var l,n,p,r,v,u,y;"title"==d?(h=h.add(g("<h2>&nbsp;</h2>")),w=!1):(a[d]?l=function(){a[d]()}:a.isValidViewType(d)&&(l=function(){a.changeView(d)},e.push(d),v=a.getViewButtonText(d)),l&&(n=R(b.themeButtonIcons,d),p=R(b.buttonIcons,d),r=R(b.defaultButtonText,d),u=R(b.buttonText,d),n=v||u?z(v||u):n&&b.theme?"<span class='ui-icon ui-icon-"+n+"'></span>":p&&!b.theme?"<span class='fc-icon fc-icon-"+p+"'></span>":z(r||d),p=["fc-"+d+"-button",f+"-button",f+"-state-default"],
y=g('<button type="button" class="'+p.join(" ")+'">'+n+"</button>").click(function(){y.hasClass(f+"-state-disabled")||(l(),(y.hasClass(f+"-state-active")||y.hasClass(f+"-state-disabled"))&&y.removeClass(f+"-state-hover"))}).mousedown(function(){y.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){y.removeClass(f+"-state-down")}).hover(function(){y.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){y.removeClass(f+
"-state-hover").removeClass(f+"-state-down")}),h=h.add(y)))});w&&h.first().addClass(f+"-corner-left").end().last().addClass(f+"-corner-right").end();1<h.length?(c=g("<div/>"),w&&c.addClass("fc-button-group"),c.append(h),d.append(c)):d.append(h)});return d}this.render=function(){var a=b.header;f=b.theme?"ui":"fc";if(a)return d=g("<div class='fc-toolbar'/>").append(c("left")).append(c("right")).append(c("center")).append('<div class="fc-clear"/>')};this.destroy=function(){d.remove()};this.updateTitle=
function(a){d.find("h2").text(a)};this.activateButton=function(a){d.find(".fc-"+a+"-button").addClass(f+"-state-active")};this.deactivateButton=function(a){d.find(".fc-"+a+"-button").removeClass(f+"-state-active")};this.disableButton=function(a){d.find(".fc-"+a+"-button").attr("disabled","disabled").addClass(f+"-state-disabled")};this.enableButton=function(a){d.find(".fc-"+a+"-button").removeAttr("disabled").removeClass(f+"-state-disabled")};this.getViewsWithButtons=function(){return e};var d=g(),
e=[],f}function fb(a){function b(a,b){c(a,function(c){var d=g.isArray(a.events),e,f;if(b==I){if(c)for(e=0;e<c.length;e++)f=c[e],(f=d?f:w(f,a))&&C.push.apply(C,q(f));G--;G||s(C)}})}function c(b,d){var e,f=r.sourceFetchers,h;for(e=0;e<f.length;e++){h=f[e].call(t,b,H.clone(),A.clone(),a.timezone,d);if(!0===h)return;if("object"==typeof h){c(h,d);return}}if(e=b.events)g.isFunction(e)?(n(),e.call(t,H.clone(),A.clone(),a.timezone,function(a){d(a);k()})):g.isArray(e)?d(e):d();else if(b.url){var l=b.success,
m=b.error,w=b.complete;e=g.isFunction(b.data)?b.data():b.data;e=g.extend({},e||{});f=K(b.startParam,a.startParam);h=K(b.endParam,a.endParam);var q=K(b.timezoneParam,a.timezoneParam);f&&(e[f]=H.format());h&&(e[h]=A.format());a.timezone&&"local"!=a.timezone&&(e[q]=a.timezone);n();g.ajax(g.extend({},gb,b,{data:e,success:function(a){a=a||[];var b=V(l,this,arguments);g.isArray(b)&&(a=b);d(a)},error:function(){V(m,this,arguments);d()},complete:function(){V(w,this,arguments);k()}}))}else d()}function d(a){var b=
r.sourceNormalizers,c;g.isFunction(a)||g.isArray(a)?c={events:a}:"string"===typeof a?c={url:a}:"object"===typeof a&&(c=g.extend({},a));if(c){c.className?"string"===typeof c.className&&(c.className=c.className.split(/\s+/)):c.className=[];g.isArray(c.events)&&(c.origArray=c.events,c.events=g.map(c.events,function(a){return w(a,c)}));for(a=0;a<b.length;a++)b[a].call(t,c);return c}}function e(a,b){return a&&b&&f(a)==f(b)}function f(a){return("object"===typeof a?a.origArray||a.googleCalendarId||a.url||
a.events:null)||a}function h(a){var b={};g.each(a,function(a,c){/^_|^(id|allDay|start|end)$/.test(a)||void 0!==c&&/undefined|null|boolean|number|string/.test(g.type(c))&&(b[a]=c)});return b}function l(a){return g.isFunction(a)?g.grep(C,a):null!=a?(a+="",g.grep(C,function(b){return b._id==a})):C}function n(){J++||D("loading",null,!0,B())}function k(){--J||D("loading",null,!1,B())}function w(b,c){var d={},e,f,h;a.eventDataTransform&&(b=a.eventDataTransform(b));c&&c.eventDataTransform&&(b=c.eventDataTransform(b));
g.extend(d,b);c&&(d.source=c);d._id=b._id||(void 0===b.id?"_fc"+hb++:b.id+"");d.className=b.className?"string"==typeof b.className?b.className.split(/\s+/):b.className:[];e=b.start||b.date;f=b.end;wa(e)&&(e=p.duration(e));wa(f)&&(f=p.duration(f));if(b.dow||p.isDuration(e)||p.isDuration(f))d.start=e?p.duration(e):null,d.end=f?p.duration(f):null,d._recurring=!0;else{if(e&&(e=t.moment(e),!e.isValid()))return!1;f&&(f=t.moment(f),f.isValid()||(f=null));h=b.allDay;void 0===h&&(h=K(c?c.allDayDefault:void 0,
a.allDayDefault));d.start=e;d.end=f;d.allDay=h;x(d);Y(d)}return d}function x(b){null==b.allDay&&(b.allDay=!(b.start.hasTime()||b.end&&b.end.hasTime()));b.allDay?(b.start.stripTime(),b.end&&b.end.stripTime()):(b.start.hasTime()||(b.start=t.rezoneDate(b.start)),b.end&&!b.end.hasTime()&&(b.end=t.rezoneDate(b.end)));b.end&&!b.end.isAfter(b.start)&&(b.end=null);b.end||(b.end=a.forceEventDuration?t.getDefaultEventEnd(b.allDay,b.start):null)}function m(a){var b;a.end||(b=a.allDay,null==b&&(b=!a.start.hasTime()),
a={start:a.start,end:t.getDefaultEventEnd(b,a.start)});return a}function q(a,b,c){var d=[],e,f,h,l,k,m;b=b||H;c=c||A;if(a)if(a._recurring){if(f=a.dow)for(e={},h=0;h<f.length;h++)e[f[h]]=!0;for(b=b.clone().stripTime();b.isBefore(c);){if(!e||e[b.day()])l=a.start,k=a.end,f=b.clone(),m=null,l&&(f=f.time(l)),k&&(m=b.clone().time(k)),h=g.extend({},a),l=!l&&!k,k=h,k.start=f,k.end=m,k.allDay=l,x(k),Y(k),d.push(h);b.add(1,"days")}}else d.push(a);return d}function v(a,b){var c={},d,e,f;b=b||{};b.start||(b.start=
a.start.clone());void 0===b.end&&(b.end=a.end?a.end.clone():null);null==b.allDay&&(b.allDay=a.allDay);x(b);d=null!==a._end&&null===b.end;e=b.allDay?Sa(b.start,a._start):S(b.start,a._start);!d&&b.end&&(f=S(b.end,b.start).subtract(S(a._end||t.getDefaultEventEnd(a._allDay,a._start),a._start)));g.each(b,function(a,b){/^_|^(id|allDay|start|end)$/.test(a)||void 0!==b&&(c[a]=b)});d=L(l(a._id),d,b.allDay,e,f,c);return{dateDelta:e,durationDelta:f,undo:d}}function L(a,b,c,d,e,f){var h=t.getIsAmbigTimezone(),
l=[];d&&!d.valueOf()&&(d=null);e&&!e.valueOf()&&(e=null);g.each(a,function(a,k){var m,n;m={start:k.start.clone(),end:k.end?k.end.clone():null,allDay:k.allDay};g.each(f,function(a){m[a]=k[a]});n={start:k._start,end:k._end,allDay:k._allDay};b&&(n.end=null);n.allDay=c;x(n);d&&(n.start.add(d),n.end&&n.end.add(d));e&&(n.end||(n.end=t.getDefaultEventEnd(n.allDay,n.start)),n.end.add(e));h&&!n.allDay&&(d||e)&&(n.start.stripZone(),n.end&&n.end.stripZone());g.extend(k,f,n);Y(k);l.push(function(){g.extend(k,
m);Y(k)})});return function(){for(var a=0;a<l.length;a++)l[a]()}}function X(){var b=a.businessHours,c={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},d=t.getView(),e;b&&(e="object"===typeof b?g.extend({},c,b):c);return e?q(w(e),d.start,d.end):[]}function u(b,c){var d=c.source||{},e=K(c.constraint,d.constraint,a.eventConstraint),d=K(c.overlap,d.overlap,a.eventOverlap);b=m(b);return y(b,e,d,c)}function z(b){return y(b,a.selectConstraint,a.selectOverlap)}
function y(a,b,c,d){var e,f;a={start:a.start.clone().stripZone(),end:a.end.clone().stripZone()};if(null!=b){e="businessHours"===b?X():"object"===typeof b?q(w(b)):l(b);f=!1;for(b=0;b<e.length;b++){var h=e[b],g=a,k=h.start.clone().stripZone(),h=t.getEventEnd(h).stripZone();if(g.start>=k&&g.end<=h){f=!0;break}}if(!f)return!1}for(b=0;b<C.length;b++)if(e=C[b],!d||d._id!==e._id)if(k=e,f=a,g=k.start.clone().stripZone(),k=t.getEventEnd(k).stripZone(),f.start<k&&f.end>g&&(!1===c||"function"===typeof c&&!c(e,
d)||d&&(f=K(e.overlap,(e.source||{}).overlap),!1===f||"function"===typeof f&&!f(d,e))))return!1;return!0}var t=this;t.isFetchNeeded=function(a,b){return!H||a.clone().stripZone()<H.clone().stripZone()||b.clone().stripZone()>A.clone().stripZone()};t.fetchEvents=function(a,c){H=a;A=c;C=[];var d=++I,e=F.length;G=e;for(var f=0;f<e;f++)b(F[f],d)};t.addEventSource=function(a){if(a=d(a))F.push(a),G++,b(a,I)};t.removeEventSource=function(a){F=g.grep(F,function(b){return!e(b,a)});C=g.grep(C,function(b){return!e(b.source,
a)});s(C)};t.updateEvent=function(a){a.start=t.moment(a.start);a.end=a.end?t.moment(a.end):null;v(a,h(a));s(C)};t.renderEvent=function(a,b){var c=w(a),d,e;if(c){c=q(c);for(d=0;d<c.length;d++)e=c[d],e.source||(b&&(E.events.push(e),e.source=E),C.push(e));s(C);return c}return[]};t.removeEvents=function(a){var b,c;null==a?a=function(){return!0}:g.isFunction(a)||(b=a+"",a=function(a){return a._id==b});C=g.grep(C,a,!0);for(c=0;c<F.length;c++)g.isArray(F[c].events)&&(F[c].events=g.grep(F[c].events,a,!0));
s(C)};t.clientEvents=l;t.mutateEvent=v;t.normalizeEventDateProps=x;t.ensureVisibleEventRange=m;var D=t.trigger,B=t.getView,s=t.reportEvents,E={events:[]},F=[E],H,A,I=0,G=0,J=0,C=[];g.each((a.events?[a.events]:[]).concat(a.eventSources||[]),function(a,b){var c=d(b);c&&F.push(c)});t.getBusinessHoursEvents=X;t.isEventRangeAllowed=u;t.isSelectionRangeAllowed=z;t.isExternalDropRangeAllowed=function(a,b){var c;b&&(c=g.extend({},b,a),c=q(w(c))[0]);if(c)return u(a,c);a=m(a);return z(a)}}function Y(a){a._allDay=
a.allDay;a._start=a.start.clone();a._end=a.end?a.end.clone():null}var P={titleRangeSeparator:" \u2014 ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,
isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",
eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},db={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},r=g.fullCalendar={version:"2.2.6"},J=r.views={};g.fn.fullCalendar=function(a){var b=Array.prototype.slice.call(arguments,
1),c=this;this.each(function(d,e){var f=g(e),h=f.data("fullCalendar");"string"===typeof a?h&&g.isFunction(h[a])&&(h=h[a].apply(h,b),d||(c=h),"destroy"===a&&f.removeData("fullCalendar")):h||(h=new cb(f,a),f.data("fullCalendar",h),h.render())});return c};var N=r.langs={};r.datepickerLang=function(a,b,c){var d=N[a]||(N[a]={});d.isRTL=c.isRTL;d.weekNumberTitle=c.weekHeader;g.each(ib,function(a,b){d[a]=b(c)});g.datepicker&&(g.datepicker.regional[b]=g.datepicker.regional[a]=c,g.datepicker.regional.en=g.datepicker.regional[""],
g.datepicker.setDefaults(c))};r.lang=function(a,b){var c,d;c=N[a]||(N[a]={});b&&O(c,b);d=ma(a);g.each(jb,function(a,b){void 0===c[a]&&(c[a]=b(d,c))});P.lang=a};var ib={defaultButtonText:function(a){return{prev:a.prevText.replace(/&.*?;/g,""),next:a.nextText.replace(/&.*?;/g,""),today:a.currentText.replace(/&.*?;/g,"")}},monthYearFormat:function(a){return a.showMonthAfterYear?"YYYY["+a.yearSuffix+"] MMMM":"MMMM YYYY["+a.yearSuffix+"]"}},jb={dayOfMonthFormat:function(a,b){var c=a.longDateFormat("l"),
c=c.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,"");return c=b.isRTL?c+" ddd":"ddd "+c},smallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},noMeridiemTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"")}};r.lang("en",{dayPopoverFormat:"dddd, MMMM D"});r.intersectionToSeg=ba;r.applyAll=
V;r.debounce=ea;var Ma="sun mon tue wed thu fri sat".split(" "),va="year month week day hour minute second millisecond".split(" "),xa={}.hasOwnProperty,Va=/^\s*\d{4}-\d\d$/,Wa=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,v=p.fn,u=g.extend({},v),Na,ka,Oa;r.moment=function(){return fa(arguments)};r.moment.utc=function(){var a=fa(arguments,!0);a.hasTime()&&a.utc();return a};r.moment.parseZone=function(){return fa(arguments,!0,!0)};v.clone=function(){var a=
u.clone.apply(this,arguments);za(this,a);this._fullCalendar&&(a._fullCalendar=!0);return a};v.time=function(a){if(!this._fullCalendar)return u.time.apply(this,arguments);if(null==a)return p.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1;p.isDuration(a)||p.isMoment(a)||(a=p.duration(a));var b=0;p.isDuration(a)&&(b=24*Math.floor(a.asDays()));return this.hours(b+a.hours()).minutes(a.minutes()).seconds(a.seconds()).milliseconds(a.milliseconds())};
v.stripTime=function(){var a;this._ambigTime||(a=this.toArray(),this.utc(),ka(this,a.slice(0,3)),this._ambigZone=this._ambigTime=!0);return this};v.hasTime=function(){return!this._ambigTime};v.stripZone=function(){var a,b;this._ambigZone||(a=this.toArray(),b=this._ambigTime,this.utc(),ka(this,a),b&&(this._ambigTime=!0),this._ambigZone=!0);return this};v.hasZone=function(){return!this._ambigZone};g.each(["utcOffset","zone"],function(a,b){u[b]&&(v[b]=function(a){null!=a&&(this._ambigZone=this._ambigTime=
!1);return u[b].apply(this,arguments)})});v.local=function(){var a=this.toArray(),b=this._ambigZone;u.local.apply(this,arguments);b&&Oa(this,a);return this};v.format=function(){return this._fullCalendar&&arguments[0]?Ba(this,Ea(arguments[0])):this._ambigTime?G(this,"YYYY-MM-DD"):this._ambigZone?G(this,"YYYY-MM-DD[T]HH:mm:ss"):u.format.apply(this,arguments)};v.toISOString=function(){return this._ambigTime?G(this,"YYYY-MM-DD"):this._ambigZone?G(this,"YYYY-MM-DD[T]HH:mm:ss"):u.toISOString.apply(this,
arguments)};v.isWithin=function(a,b){var c=ga([this,a,b]);return c[0]>=c[1]&&c[0]<c[2]};v.isSame=function(a,b){var c;if(!this._fullCalendar)return u.isSame.apply(this,arguments);if(b)return c=ga([this,a],!0),u.isSame.call(c[0],c[1],b);a=r.moment.parseZone(a);return u.isSame.call(this,a)&&Boolean(this._ambigTime)===Boolean(a._ambigTime)&&Boolean(this._ambigZone)===Boolean(a._ambigZone)};g.each(["isBefore","isAfter"],function(a,b){v[b]=function(a,d){var e;if(!this._fullCalendar)return u[b].apply(this,
arguments);e=ga([this,a]);return u[b].call(e[0],e[1],d)}});ka=(Na="_d"in p()&&"updateOffset"in p)?function(a,b){a._d.setTime(Date.UTC.apply(Date,b));p.updateOffset(a,!1)}:Aa;Oa=Na?function(a,b){a._d.setTime(+new Date(b[0]||0,b[1]||0,b[2]||0,b[3]||0,b[4]||0,b[5]||0,b[6]||0));p.updateOffset(a,!1)}:Aa;var Ca={t:function(a){return G(a,"a").charAt(0)},T:function(a){return G(a,"A").charAt(0)}};r.formatRange=Da;var Xa={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",
h:"second",m:"second",s:"second"},ia={};r.Class=E;E.extend=function(a){var b=this,c;a=a||{};xa.call(a,"constructor")&&(c=a.constructor);"function"!==typeof c&&(c=a.constructor=function(){b.apply(this,arguments)});c.prototype=U(b.prototype);da(a,c.prototype);Ta(a,c.prototype);da(b,c);return c};E.mixin=function(a){da(a.prototype||a,this.prototype)};var kb=E.extend({isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(a){this.options=a||{}},show:function(){this.isHidden&&
(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var a=this,b=this.options;this.el=g('<div class="fc-popover"/>').addClass(b.className||"").css({top:0,left:0}).append(b.content).appendTo(b.parentEl);this.el.on("click",".fc-close",function(){a.hide()});if(b.autoHide)g(document).on("mousedown",this.documentMousedownProxy=g.proxy(this,"documentMousedown"))},
documentMousedown:function(a){this.el&&!g(a.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide();this.el&&(this.el.remove(),this.el=null);g(document).off("mousedown",this.documentMousedownProxy)},position:function(){var a=this.options,b=this.el.offsetParent().offset(),c=this.el.outerWidth(),d=this.el.outerHeight(),e=g(window),f=sa(this.el),h,l,n,k;n=a.top||0;k=void 0!==a.left?a.left:void 0!==a.right?a.right-c:0;f.is(window)||f.is(document)?(f=e,l=h=0):(l=f.offset(),h=l.top,
l=l.left);h+=e.scrollTop();l+=e.scrollLeft();!1!==a.viewportConstrain&&(n=Math.min(n,h+f.outerHeight()-d-this.margin),n=Math.max(n,h+this.margin),k=Math.min(k,l+f.outerWidth()-c-this.margin),k=Math.max(k,l+this.margin));this.el.css({top:n-b.top,left:k-b.left})},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))}}),lb=E.extend({grid:null,rowCoords:null,colCoords:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,constructor:function(a){this.grid=
a},build:function(){this.rowCoords=this.grid.computeRowCoords();this.colCoords=this.grid.computeColCoords();this.computeBounds()},clear:function(){this.colCoords=this.rowCoords=null},getCell:function(a,b){var c=this.rowCoords,d=this.colCoords,e=null,f=null,h,g;if(this.inBounds(a,b)){for(h=0;h<c.length;h++)if(g=c[h],b>=g.top&&b<g.bottom){e=h;break}for(h=0;h<d.length;h++)if(g=d[h],a>=g.left&&a<g.right){f=h;break}if(null!==e&&null!==f)return c=this.grid.getCell(e,f),c.grid=this.grid,c}return null},computeBounds:function(){var a;
this.containerEl&&(a=this.containerEl.offset(),this.minX=a.left,this.maxX=a.left+this.containerEl.outerWidth(),this.minY=a.top,this.maxY=a.top+this.containerEl.outerHeight())},inBounds:function(a,b){return this.containerEl?a>=this.minX&&a<this.maxX&&b>=this.minY&&b<this.maxY:!0}}),mb=E.extend({coordMaps:null,constructor:function(a){this.coordMaps=a},build:function(){var a=this.coordMaps,b;for(b=0;b<a.length;b++)a[b].build()},getCell:function(a,b){var c=this.coordMaps,d=null,e;for(e=0;e<c.length&&
!d;e++)d=c[e].getCell(a,b);return d},clear:function(){var a=this.coordMaps,b;for(b=0;b<a.length;b++)a[b].clear()}}),Z=E.extend({coordMap:null,options:null,isListening:!1,isDragging:!1,origCell:null,cell:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(a,b){this.coordMap=a;this.options=b||
{}},mousedown:function(a){1!=a.which||a.ctrlKey||(a.preventDefault(),this.startListening(a),this.options.distance||this.startDrag(a))},startListening:function(a){var b;this.isListening||(a&&this.options.scroll&&(b=sa(g(a.target)),b.is(window)||b.is(document)||(this.scrollEl=b,this.scrollHandlerProxy=ea(g.proxy(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),this.computeCoords(),a&&(this.origCell=b=this.getCell(a),this.mouseX0=a.pageX,this.mouseY0=a.pageY),g(document).on("mousemove",
this.mousemoveProxy=g.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=g.proxy(this,"mouseup")).on("selectstart",this.preventDefault),this.isListening=!0,this.trigger("listenStart",a))},computeCoords:function(){this.coordMap.build();this.computeScrollBounds()},mousemove:function(a){var b,c;this.isDragging||(b=this.options.distance||1,c=Math.pow(a.pageX-this.mouseX0,2)+Math.pow(a.pageY-this.mouseY0,2),c>=b*b&&this.startDrag(a));this.isDragging&&this.drag(a)},startDrag:function(a){this.isListening||
this.startListening();this.isDragging||(this.isDragging=!0,this.trigger("dragStart",a),(a=this.getCell(a))&&this.cellOver(a))},drag:function(a){var b;this.isDragging&&(b=this.getCell(a),Ha(b,this.cell)||(this.cell&&this.cellOut(),b&&this.cellOver(b)),this.dragScroll(a))},cellOver:function(a){this.cell=a;this.trigger("cellOver",a,Ha(a,this.origCell))},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cell=null)},mouseup:function(a){this.stopDrag(a);this.stopListening(a)},stopDrag:function(a){this.isDragging&&
(this.stopScrolling(),this.trigger("dragStop",a),this.isDragging=!1)},stopListening:function(a){this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),g(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mouseupProxy=this.mousemoveProxy=null,this.isListening=!1,this.trigger("listenStop",a),this.origCell=this.cell=null,this.coordMap.clear())},getCell:function(a){return this.coordMap.getCell(a.pageX,
a.pageY)},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(a){a.preventDefault()},computeScrollBounds:function(){var a=this.scrollEl,b;a&&(b=a.offset(),this.scrollBounds={top:b.top,left:b.left,bottom:b.top+a.outerHeight(),right:b.left+a.outerWidth()})},dragScroll:function(a){var b=this.scrollSensitivity,c=this.scrollBounds,d,e,f,h=0,g=0;c&&(d=(b-(a.pageY-c.top))/b,e=(b-(c.bottom-a.pageY))/b,f=(b-(a.pageX-c.left))/b,a=
(b-(c.right-a.pageX))/b,0<=d&&1>=d?h=d*this.scrollSpeed*-1:0<=e&&1>=e&&(h=e*this.scrollSpeed),0<=f&&1>=f?g=f*this.scrollSpeed*-1:0<=a&&1>=a&&(g=a*this.scrollSpeed));this.setScrollVel(h,g)},setScrollVel:function(a,b){this.scrollTopVel=a;this.scrollLeftVel=b;this.constrainScrollVel();!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(g.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var a=this.scrollEl;0>this.scrollTopVel?
0>=a.scrollTop()&&(this.scrollTopVel=0):0<this.scrollTopVel&&a.scrollTop()+a[0].clientHeight>=a[0].scrollHeight&&(this.scrollTopVel=0);0>this.scrollLeftVel?0>=a.scrollLeft()&&(this.scrollLeftVel=0):0<this.scrollLeftVel&&a.scrollLeft()+a[0].clientWidth>=a[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var a=this.scrollEl,b=this.scrollIntervalMs/1E3;this.scrollTopVel&&a.scrollTop(a.scrollTop()+this.scrollTopVel*b);this.scrollLeftVel&&a.scrollLeft(a.scrollLeft()+this.scrollLeftVel*
b);this.constrainScrollVel();this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.computeCoords())},scrollHandler:function(){this.scrollIntervalId||this.computeCoords()}}),nb=E.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(a,
b){this.options=b=b||{};this.sourceEl=a;this.parentEl=b.parentEl?g(b.parentEl):a.parent()},start:function(a){this.isFollowing||(this.isFollowing=!0,this.mouseY0=a.pageY,this.mouseX0=a.pageX,this.leftDelta=this.topDelta=0,this.isHidden||this.updatePosition(),g(document).on("mousemove",this.mousemoveProxy=g.proxy(this,"mousemove")))},stop:function(a,b){function c(){this.isAnimating=!1;d.destroyEl();this.top0=this.left0=null;b&&b()}var d=this,e=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&
(this.isFollowing=!1,g(document).off("mousemove",this.mousemoveProxy),a&&e&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:e,complete:c})):c())},getEl:function(){var a=this.el;a||(this.sourceEl.width(),a=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl));
return a},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var a,b;this.getEl();null===this.top0&&(this.sourceEl.width(),a=this.sourceEl.offset(),b=this.el.offsetParent().offset(),this.top0=a.top-b.top,this.left0=a.left-b.left);this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(a){this.topDelta=a.pageY-this.mouseY0;this.leftDelta=a.pageX-this.mouseX0;this.isHidden||this.updatePosition()},hide:function(){this.isHidden||
(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),Pa=E.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(a){this.view=a;this.isRTL=a.opt("isRTL")},rowHtml:function(a,b){var c=this.getHtmlRenderer("cell",a),d="",e,f;b=b||0;for(e=0;e<this.colCnt;e++)f=this.getCell(b,e),d+=c(f);d=this.bookendCells(d,a,b);return"<tr>"+d+"</tr>"},bookendCells:function(a,b,c){var d=this.getHtmlRenderer("intro",b)(c||
0);c=this.getHtmlRenderer("outro",b)(c||0);b=this.isRTL?c:d;d=this.isRTL?d:c;return"string"===typeof a?b+a+d:a.prepend(b).append(d)},getHtmlRenderer:function(a,b){var c=this.view,d,e,f,h;d=a+"Html";b&&(e=b+ya(a)+"Html");if(e&&(h=c[e]))f=c;else if(e&&(h=this[e]))f=this;else if(h=c[d])f=c;else if(h=this[d])f=this;return"function"===typeof h?function(){return h.apply(f,arguments)||""}:function(){return h||""}}}),B=r.Grid=Pa.extend({start:null,end:null,rowCnt:0,colCnt:0,rowData:null,colData:null,el:null,
coordMap:null,elsByFill:null,documentDragStartProxy:null,colHeadFormat:null,eventTimeFormat:null,displayEventEnd:null,constructor:function(){Pa.apply(this,arguments);this.coordMap=new lb(this);this.elsByFill={};this.documentDragStartProxy=g.proxy(this,"documentDragStart")},render:function(){this.bindHandlers()},destroy:function(){this.unbindHandlers()},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventEnd:function(){return!1},
setRange:function(a){var b=this.view;this.start=a.start.clone();this.end=a.end.clone();this.rowData=[];this.colData=[];this.updateCells();this.colHeadFormat=b.opt("columnFormat")||this.computeColHeadFormat();this.eventTimeFormat=b.opt("timeFormat")||this.computeEventTimeFormat();this.displayEventEnd=b.opt("displayEventEnd");null==this.displayEventEnd&&(this.displayEventEnd=this.computeDisplayEventEnd())},updateCells:function(){},rangeToSegs:function(a){},getCell:function(a,b){var c;null==b&&("number"===
typeof a?(b=a%this.colCnt,a=Math.floor(a/this.colCnt)):(b=a.col,a=a.row));c={row:a,col:b};g.extend(c,this.getRowData(a),this.getColData(b));g.extend(c,this.computeCellRange(c));return c},computeCellRange:function(a){},getRowData:function(a){return this.rowData[a]||{}},getColData:function(a){return this.colData[a]||{}},getRowEl:function(a){},getColEl:function(a){},getCellDayEl:function(a){return this.getColEl(a.col)||this.getRowEl(a.row)},computeRowCoords:function(){var a=[],b,c,d;for(b=0;b<this.rowCnt;b++)c=
this.getRowEl(b),d={top:c.offset().top},0<b&&(a[b-1].bottom=d.top),a.push(d);d.bottom=d.top+c.outerHeight();return a},computeColCoords:function(){var a=[],b,c,d;for(b=0;b<this.colCnt;b++)c=this.getColEl(b),d={left:c.offset().left},0<b&&(a[b-1].right=d.left),a.push(d);d.right=d.left+c.outerWidth();return a},bindHandlers:function(){var a=this;this.el.on("mousedown",function(b){g(b.target).is(".fc-event-container *, .fc-more")||g(b.target).closest(".fc-popover").length||a.dayMousedown(b)});this.bindSegHandlers();
g(document).on("dragstart",this.documentDragStartProxy)},unbindHandlers:function(){g(document).off("dragstart",this.documentDragStartProxy)},dayMousedown:function(a){var b=this,c=this.view,d=c.opt("selectable"),e,f,h=new Z(this.coordMap,{scroll:c.opt("dragScroll"),dragStart:function(){c.unselect()},cellOver:function(a,c){var g=h.origCell;g&&(e=c?a:null,d&&((f=b.computeSelection(g,a))?b.renderSelection(f):T()))},cellOut:function(a){f=e=null;b.destroySelection();I()},listenStop:function(a){e&&c.trigger("dayClick",
b.getCellDayEl(e),e.start,a);f&&c.reportSelection(f,a);I()}});h.mousedown(a)},renderRangeHelper:function(a,b){var c;c=b?U(b.event):{};c.start=a.start.clone();c.end=a.end?a.end.clone():null;c.allDay=null;this.view.calendar.normalizeEventDateProps(c);c.className=(c.className||[]).concat("fc-helper");b||(c.editable=!1);this.renderHelper(c,b)},renderHelper:function(a,b){},destroyHelper:function(){},renderSelection:function(a){this.renderHighlight(a)},destroySelection:function(){this.destroyHighlight()},
computeSelection:function(a,b){var c=[a.start,a.end,b.start,b.end];c.sort(Ua);c={start:c[0].clone(),end:c[3].clone()};return this.view.calendar.isSelectionRangeAllowed(c)?c:null},renderHighlight:function(a){this.renderFill("highlight",this.rangeToSegs(a))},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(a,b){},destroyFill:function(a){var b=this.elsByFill[a];b&&(b.remove(),delete this.elsByFill[a])},renderFillSegEls:function(a,
b){var c=this,d=this[a+"SegEl"],e="",f=[],h;if(b.length){for(h=0;h<b.length;h++)e+=this.fillSegHtml(a,b[h]);g(e).each(function(a,e){var h=b[a],w=g(e);d&&(w=d.call(c,h,w));w&&(w=g(w),w.is(c.fillSegTag)&&(h.el=w,f.push(h)))})}return f},fillSegTag:"div",fillSegHtml:function(a,b){var c=this[a+"SegClasses"],d=this[a+"SegStyles"],c=c?c.call(this,b):[],d=d?d.call(this,b):"";return"<"+this.fillSegTag+(c.length?' class="'+c.join(" ")+'"':"")+(d?' style="'+d+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+
this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(a){a=a.start;return'<th class="fc-day-header '+this.view.widgetHeaderClass+" fc-"+Ma[a.day()]+'">'+z(a.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(a){var b=this.view;a=a.start;var c=this.getDayClasses(a);c.unshift("fc-day",b.widgetContentClass);return'<td class="'+c.join(" ")+'" data-date="'+a.format("YYYY-MM-DD")+'"></td>'},getDayClasses:function(a){var b=this.view,c=b.calendar.getNow().stripTime(),
d=["fc-"+Ma[a.day()]];"month"===b.name&&a.month()!=b.intervalStart.month()&&d.push("fc-other-month");a.isSame(c,"day")?d.push("fc-today",b.highlightStateClass):a<c?d.push("fc-past"):d.push("fc-future");return d}});B.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,segs:null,renderEvents:function(a){a=this.eventsToSegs(a);var b=[],c=[],d,e;for(d=0;d<a.length;d++){e=a[d];var f=Ia(e.event);"background"===f||"inverse-background"===f?b.push(e):c.push(e)}b=this.renderBgSegs(b)||b;c=this.renderFgSegs(c)||
c;this.segs=b.concat(c)},destroyEvents:function(){this.triggerSegMouseout();this.destroyFgSegs();this.destroyBgSegs();this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(a){},destroyFgSegs:function(){},renderFgSegEls:function(a,b){var c=this.view,d="",e=[],f;if(a.length){for(f=0;f<a.length;f++)d+=this.fgSegHtml(a[f],b);g(d).each(function(b,d){var f=a[b],k=c.resolveEventEl(f.event,g(d));k&&(k.data("fc-seg",f),f.el=k,e.push(f))})}return e},fgSegHtml:function(a,b){},renderBgSegs:function(a){return this.renderFill("bgEvent",
a)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(a,b){return this.view.resolveEventEl(a.event,b)},bgEventSegClasses:function(a){a=a.event;return["fc-bgevent"].concat(a.className,(a.source||{}).className||[])},bgEventSegStyles:function(a){var b=this.view;a=a.event;var c=a.source||{},d=a.color,e=c.color,f=b.opt("eventColor");return(b=a.backgroundColor||d||c.backgroundColor||e||b.opt("eventBackgroundColor")||f)?"background-color:"+b:""},businessHoursSegClasses:function(a){return["fc-nonbusiness",
"fc-bgevent"]},bindSegHandlers:function(){var a=this,b=this.view;g.each({mouseenter:function(b,d){a.triggerSegMouseover(b,d)},mouseleave:function(b,d){a.triggerSegMouseout(b,d)},click:function(a,d){return b.trigger("eventClick",this,a.event,d)},mousedown:function(c,d){g(d.target).is(".fc-resizer")&&b.isEventResizable(c.event)?a.segResizeMousedown(c,d):b.isEventDraggable(c.event)&&a.segDragMousedown(c,d)}},function(b,d){a.el.on(b,".fc-event-container > *",function(b){var c=g(this).data("fc-seg");if(c&&
!a.isDraggingSeg&&!a.isResizingSeg)return d.call(this,c,b)})})},triggerSegMouseover:function(a,b){this.mousedOverSeg||(this.mousedOverSeg=a,this.view.trigger("eventMouseover",a.el[0],a.event,b))},triggerSegMouseout:function(a,b){b=b||{};this.mousedOverSeg&&(a=a||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",a.el[0],a.event,b))},segDragMousedown:function(a,b){var c=this,d=this.view,e=a.el,f=a.event,h,g=new nb(a.el,{parentEl:d.el,opacity:d.opt("dragOpacity"),revertDuration:d.opt("dragRevertDuration"),
zIndex:2}),n=new Z(d.coordMap,{distance:5,scroll:d.opt("dragScroll"),listenStart:function(a){g.hide();g.start(a)},dragStart:function(b){c.triggerSegMouseout(a,b);c.isDraggingSeg=!0;d.hideEvent(f);d.trigger("eventDragStart",e[0],f,b,{})},cellOver:function(b,e){(h=c.computeEventDrop(a.cell||n.origCell,b,f))?(d.renderDrag(h,a)?g.hide():g.show(),e&&(h=null)):(g.show(),T())},cellOut:function(){h=null;d.destroyDrag();g.show();I()},dragStop:function(a){g.stop(!h,function(){c.isDraggingSeg=!1;d.destroyDrag();
d.showEvent(f);d.trigger("eventDragStop",e[0],f,a,{});h&&d.reportEventDrop(f,h,e,a)});I()},listenStop:function(){g.stop()}});n.mousedown(b)},computeEventDrop:function(a,b,c){var d=a.start;a=b.start;d.hasTime()===a.hasTime()?(a=S(a,d),b=c.start.clone().add(a),d=null===c.end?null:c.end.clone().add(a),a=c.allDay):(b=a.clone(),d=null,a=!a.hasTime());b={start:b,end:d,allDay:a};return this.view.calendar.isEventRangeAllowed(b,c)?b:null},documentDragStart:function(a,b){var c=this.view,d;c.opt("droppable")&&
(d=g(a.target),c=c.opt("dropAccept"),(g.isFunction(c)?c.call(d[0],d):d.is(c))&&this.startExternalDrag(d,a,b))},startExternalDrag:function(a,b,c){var d=this,e=$a(a),f;c=new Z(this.coordMap,{cellOver:function(a){(f=d.computeExternalDrop(a,e))?d.renderDrag(f):T()},cellOut:function(){f=null;d.destroyDrag();I()}});g(document).one("dragstop",function(b,c){d.destroyDrag();I();f&&d.view.reportExternalDrop(e,f,a,b,c)});c.startDrag(b)},computeExternalDrop:function(a,b){var c={start:a.start.clone(),end:null};
b.startTime&&!c.start.hasTime()&&c.start.time(b.startTime);b.duration&&(c.end=c.start.clone().add(b.duration));return this.view.calendar.isExternalDropRangeAllowed(c,b.eventProps)?c:null},renderDrag:function(a,b){},destroyDrag:function(){},segResizeMousedown:function(a,b){var c=this,d=this.view,e=d.calendar,f=a.el,h=a.event,g=h.start,n=e.getEventEnd(h),k;(new Z(this.coordMap,{distance:5,scroll:d.opt("dragScroll"),dragStart:function(b){c.triggerSegMouseout(a,b);c.isResizingSeg=!0;d.trigger("eventResizeStart",
f[0],h,b,{})},cellOver:function(b){k=b.end;k.isAfter(g)||(k=g.clone().add(S(b.end,b.start)));k.isSame(n)?k=null:e.isEventRangeAllowed({start:g,end:k},h)?(c.renderEventResize({start:g,end:k},a),d.hideEvent(h)):(k=null,T())},cellOut:function(){k=null;c.destroyEventResize();d.showEvent(h);I()},dragStop:function(a){c.isResizingSeg=!1;c.destroyEventResize();d.showEvent(h);I();d.trigger("eventResizeStop",f[0],h,a,{});k&&d.reportEventResize(h,k,f,a)}})).mousedown(b)},renderEventResize:function(a,b){},destroyEventResize:function(){},
getEventTimeText:function(a,b){b=b||this.eventTimeFormat;return a.end&&this.displayEventEnd?this.view.formatRange(a,b):a.start.format(b)},getSegClasses:function(a,b,c){var d=a.event;a=["fc-event",a.isStart?"fc-start":"fc-not-start",a.isEnd?"fc-end":"fc-not-end"].concat(d.className,d.source?d.source.className:[]);b&&a.push("fc-draggable");c&&a.push("fc-resizable");return a},getEventSkinCss:function(a){var b=this.view,c=a.source||{},d=a.color,e=c.color,f=b.opt("eventColor"),h=a.backgroundColor||d||
c.backgroundColor||e||b.opt("eventBackgroundColor")||f,d=a.borderColor||d||c.borderColor||e||b.opt("eventBorderColor")||f;a=a.textColor||c.textColor||b.opt("eventTextColor");b=[];h&&b.push("background-color:"+h);d&&b.push("border-color:"+d);a&&b.push("color:"+a);return b.join(";")},eventsToSegs:function(a,b){var c=this.eventsToRanges(a),d=[],e;for(e=0;e<c.length;e++)d.push.apply(d,this.eventRangeToSegs(c[e],b));return d},eventsToRanges:function(a){var b=this;a=Ya(a);var c=[];g.each(a,function(a,e){e.length&&
c.push.apply(c,"inverse-background"===Ia(e[0])?b.eventsToInverseRanges(e):b.eventsToNormalRanges(e))});return c},eventsToNormalRanges:function(a){var b=this.view.calendar,c=[],d,e,f,h;for(d=0;d<a.length;d++)e=a[d],f=e.start.clone().stripZone(),h=b.getEventEnd(e).stripZone(),c.push({event:e,start:f,end:h,eventStartMS:+f,eventDurationMS:h-f});return c},eventsToInverseRanges:function(a){var b=this.view,c=b.start.clone().stripZone(),b=b.end.clone().stripZone(),d=this.eventsToNormalRanges(a),e=[];a=a[0];
var f,h;d.sort(Za);for(f=0;f<d.length;f++)h=d[f],h.start>c&&e.push({event:a,start:c,end:h.start}),c=h.end;c<b&&e.push({event:a,start:c,end:b});return e},eventRangeToSegs:function(a,b){var c,d,e;c=b?b(a):this.rangeToSegs(a);for(d=0;d<c.length;d++)e=c[d],e.event=a.event,e.eventStartMS=a.eventStartMS,e.eventDurationMS=a.eventDurationMS;return c}});r.compareSegs=W;r.dataAttrPrefix="";var $=B.extend({numbersVisible:!1,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,
dayEls:null,helperEls:null,render:function(a){var b=this.view,c=this.rowCnt,d=c*this.colCnt,e="",f;for(f=0;f<c;f++)e+=this.dayRowHtml(f,a);this.el.html(e);this.rowEls=this.el.find(".fc-row");this.dayEls=this.el.find(".fc-day");for(a=0;a<d;a++)c=this.getCell(a),b.trigger("dayRender",null,c.start,this.dayEls.eq(a));B.prototype.render.call(this)},destroy:function(){this.destroySegPopover();B.prototype.destroy.call(this)},dayRowHtml:function(a,b){var c=["fc-row","fc-week",this.view.widgetContentClass];
b&&c.push("fc-rigid");return'<div class="'+c.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",a)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",a)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(a){return this.bgCellHtml(a)},computeColHeadFormat:function(){return 1<this.rowCnt?"ddd":1<this.colCnt?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},
computeDisplayEventEnd:function(){return 1==this.colCnt},updateCells:function(){var a,b,c;this.updateCellDates();a=this.cellDates;if(this.breakOnWeeks){b=a[0].day();for(c=1;c<a.length&&a[c].day()!=b;c++);b=Math.ceil(a.length/c)}else b=1,c=a.length;this.rowCnt=b;this.colCnt=c},updateCellDates:function(){for(var a=this.view,b=this.start.clone(),c=[],d=-1,e=[];b.isBefore(this.end);)a.isHiddenDay(b)?e.push(d+.5):(d++,e.push(d),c.push(b.clone())),b.add(1,"days");this.cellDates=c;this.dayToCellOffsets=
e},computeCellRange:function(a){var b=this.colCnt;a=this.cellDates[a.row*b+(this.isRTL?b-a.col-1:a.col)].clone();b=a.clone().add(1,"day");return{start:a,end:b}},getRowEl:function(a){return this.rowEls.eq(a)},getColEl:function(a){return this.dayEls.eq(a)},getCellDayEl:function(a){return this.dayEls.eq(a.row*this.colCnt+a.col)},computeRowCoords:function(){var a=B.prototype.computeRowCoords.call(this);a[a.length-1].bottom+=this.bottomCoordPadding;return a},rangeToSegs:function(a){var b=this.isRTL,c=
this.rowCnt,d=this.colCnt,e=[],f,h,g,n,k,w,p;a=this.view.computeDayRange(a);f=this.dateToCellOffset(a.start);a=this.dateToCellOffset(a.end.subtract(1,"days"));for(h=0;h<c;h++)g=h*d,n=g+d-1,p=Math.max(g,f),n=Math.min(n,a),p=Math.ceil(p),n=Math.floor(n),p<=n&&(k=p===f,w=n===a,p-=g,n-=g,g={row:h,isStart:k,isEnd:w},b?(g.leftCol=d-n-1,g.rightCol=d-p-1):(g.leftCol=p,g.rightCol=n),e.push(g));return e},dateToCellOffset:function(a){var b=this.dayToCellOffsets;a=a.diff(this.start,"days");return 0>a?b[0]-1:
a>=b.length?b[b.length-1]+1:b[a]},renderDrag:function(a,b){var c;this.renderHighlight(this.view.calendar.ensureVisibleEventRange(a));if(b&&!b.el.closest(this.el).length)return this.renderRangeHelper(a,b),c=this.view.opt("dragOpacity"),void 0!==c&&this.helperEls.css("opacity",c),!0},destroyDrag:function(){this.destroyHighlight();this.destroyHelper()},renderEventResize:function(a,b){this.renderHighlight(a);this.renderRangeHelper(a,b)},destroyEventResize:function(){this.destroyHighlight();this.destroyHelper()},
renderHelper:function(a,b){var c=[],d=this.eventsToSegs([a]),e,d=this.renderFgSegEls(d);e=this.renderSegRows(d);this.rowEls.each(function(a,d){var l=g(d),n=g('<div class="fc-helper-skeleton"><table/></div>'),k;k=b&&b.row===a?b.el.position().top:l.find(".fc-content-skeleton tbody").position().top;n.css("top",k).find("table").append(e[a].tbodyEl);l.append(n);c.push(n[0])});this.helperEls=g(c)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(a,
b){var c=[],d,e,f;b=this.renderFillSegEls(a,b);for(d=0;d<b.length;d++)e=b[d],f=this.renderFillRow(a,e),this.rowEls.eq(e.row).append(f),c.push(f[0]);this.elsByFill[a]=g(c);return b},renderFillRow:function(a,b){var c=this.colCnt,d=b.leftCol,e=b.rightCol+1,f,h;f=g('<div class="fc-'+a.toLowerCase()+'-skeleton"><table><tr/></table></div>');h=f.find("tr");0<d&&h.append('<td colspan="'+d+'"/>');h.append(b.el.attr("colspan",e-d));e<c&&h.append('<td colspan="'+(c-e)+'"/>');this.bookendCells(h,a);return f}});
$.mixin({rowStructs:null,destroyEvents:function(){this.destroySegPopover();B.prototype.destroyEvents.apply(this,arguments)},getEventSegs:function(){return B.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(a){a=g.grep(a,function(a){return a.event.allDay});return B.prototype.renderBgSegs.call(this,a)},renderFgSegs:function(a){var b;a=this.renderFgSegEls(a);b=this.rowStructs=this.renderSegRows(a);this.rowEls.each(function(a,d){g(d).find(".fc-content-skeleton > table").append(b[a].tbodyEl)});
return a},destroyFgSegs:function(){for(var a=this.rowStructs||[],b;b=a.pop();)b.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(a){var b=[],c;a=this.groupSegRows(a);for(c=0;c<a.length;c++)b.push(this.renderSegRow(c,a[c]));return b},fgSegHtml:function(a,b){var c=this.view,d=a.event,e=c.isEventDraggable(d),c=!b&&d.allDay&&a.isEnd&&c.isEventResizable(d),e=this.getSegClasses(a,e,c),f=this.getEventSkinCss(d),h="",g;e.unshift("fc-day-grid-event");!d.allDay&&a.isStart&&(h='<span class="fc-time">'+
z(this.getEventTimeText(d))+"</span>");g='<span class="fc-title">'+(z(d.title||"")||"&nbsp;")+"</span>";return'<a class="'+e.join(" ")+'"'+(d.url?' href="'+z(d.url)+'"':"")+(f?' style="'+f+'"':"")+'><div class="fc-content">'+(this.isRTL?g+" "+h:h+" "+g)+"</div>"+(c?'<div class="fc-resizer"/>':"")+"</a>"},renderSegRow:function(a,b){function c(a){for(;m<a;)(u=(k[p-1]||[])[m])?u.attr("rowspan",parseInt(u.attr("rowspan")||1,10)+1):(u=g("<td/>"),q.append(u)),n[p][m]=u,k[p][m]=u,m++}var d=this.colCnt,e=
this.buildSegLevels(b),f=Math.max(1,e.length),h=g("<tbody/>"),l=[],n=[],k=[],p,x,m,q,r,v,u;for(p=0;p<f;p++){x=e[p];m=0;q=g("<tr/>");l.push([]);n.push([]);k.push([]);if(x)for(r=0;r<x.length;r++){v=x[r];c(v.leftCol);u=g('<td class="fc-event-container"/>').append(v.el);for(v.leftCol!=v.rightCol?u.attr("colspan",v.rightCol-v.leftCol+1):k[p][m]=u;m<=v.rightCol;)n[p][m]=u,l[p][m]=v,m++;q.append(u)}c(d);this.bookendCells(q,"eventSkeleton");h.append(q)}return{row:a,tbodyEl:h,cellMatrix:n,segMatrix:l,segLevels:e,
segs:b}},buildSegLevels:function(a){var b=[],c,d,e;a.sort(W);for(c=0;c<a.length;c++){d=a[c];for(e=0;e<b.length;e++){var f;a:{f=b[e];for(var g=void 0,l=void 0,g=0;g<f.length;g++)if(l=f[g],l.leftCol<=d.rightCol&&l.rightCol>=d.leftCol){f=!0;break a}f=!1}if(!f)break}d.level=e;(b[e]||(b[e]=[])).push(d)}for(e=0;e<b.length;e++)b[e].sort(ab);return b},groupSegRows:function(a){var b=[],c;for(c=0;c<this.rowCnt;c++)b.push([]);for(c=0;c<a.length;c++)b[a[c].row].push(a[c]);return b}});$.mixin({segPopover:null,
popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(a){var b=this.rowStructs||[],c,d;for(c=0;c<b.length;c++)this.unlimitRow(c),d=a?"number"===typeof a?a:this.computeRowLevelLimit(c):!1,!1!==d&&this.limitRow(c,d)},computeRowLevelLimit:function(a){var b=this.rowEls.eq(a).height();a=this.rowStructs[a].tbodyEl.children();var c,d;for(c=0;c<a.length;c++)if(d=a.eq(c).removeClass("fc-limited"),d.position().top+d.outerHeight()>b)return c;return!1},limitRow:function(a,
b){function c(c){for(;h<c;)l=d.getCell(a,h),q=d.getCellSegs(l,b),q.length&&(v=k[b-1][h],D=d.renderMoreLink(l,q),t=g("<div/>").append(D),v.append(t),f.push(t[0])),h++}var d=this,e=this.rowStructs[a],f=[],h=0,l,n,k,p,x,m,q,r,u,v,z,B,y,t,D;if(b&&b<e.segLevels.length){n=e.segLevels[b-1];k=e.cellMatrix;p=e.tbodyEl.children().slice(b).addClass("fc-limited").get();for(x=0;x<n.length;x++){m=n[x];c(m.leftCol);u=[];for(r=0;h<=m.rightCol;)l=this.getCell(a,h),q=this.getCellSegs(l,b),u.push(q),r+=q.length,h++;
if(r){v=k[b-1][m.leftCol];r=v.attr("rowspan")||1;z=[];for(B=0;B<u.length;B++)y=g('<td class="fc-more-cell"/>').attr("rowspan",r),q=u[B],l=this.getCell(a,m.leftCol+B),D=this.renderMoreLink(l,[m].concat(q)),t=g("<div/>").append(D),y.append(t),z.push(y[0]),f.push(y[0]);v.addClass("fc-limited").after(g(z));p.push(v[0])}}c(this.colCnt);e.moreEls=g(f);e.limitedEls=g(p)}},unlimitRow:function(a){a=this.rowStructs[a];a.moreEls&&(a.moreEls.remove(),a.moreEls=null);a.limitedEls&&(a.limitedEls.removeClass("fc-limited"),
a.limitedEls=null)},renderMoreLink:function(a,b){var c=this,d=this.view;return g('<a class="fc-more"/>').text(this.getMoreLinkText(b.length)).on("click",function(e){var f=d.opt("eventLimitClick"),h=a.start,l=g(this),n=c.getCellDayEl(a),k=c.getCellSegs(a),k=c.resliceDaySegs(k,h),p=c.resliceDaySegs(b,h);"function"===typeof f&&(f=d.trigger("eventLimitClick",null,{date:h,dayEl:n,moreEl:l,segs:k,hiddenSegs:p},e));"popover"===f?c.showSegPopover(a,l,k):"string"===typeof f&&d.calendar.zoomTo(h,f)})},showSegPopover:function(a,
b,c){var d=this,e=this.view;b=b.parent();var f;f=1==this.rowCnt?e.el:this.rowEls.eq(a.row);a={className:"fc-more-popover",content:this.renderSegPopoverContent(a,c),parentEl:this.el,top:f.offset().top,autoHide:!0,viewportConstrain:e.opt("popoverViewportConstrain"),hide:function(){d.segPopover.destroy();d.segPopover=null;d.popoverSegs=null}};this.isRTL?a.right=b.offset().left+b.outerWidth()+1:a.left=b.offset().left-1;this.segPopover=new kb(a);this.segPopover.show()},renderSegPopoverContent:function(a,
b){var c=this.view,d=c.opt("theme"),e=a.start.format(c.opt("dayPopoverFormat")),c=g('<div class="fc-header '+c.widgetHeaderClass+'"><span class="fc-close '+(d?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+z(e)+'</span><div class="fc-clear"/></div><div class="fc-body '+c.widgetContentClass+'"><div class="fc-event-container"></div></div>'),d=c.find(".fc-event-container");this.popoverSegs=b=this.renderFgSegEls(b,!0);for(e=0;e<b.length;e++)b[e].cell=a,d.append(b[e].el);
return c},resliceDaySegs:function(a,b){var c=g.map(a,function(a){return a.event}),d=b.clone().stripTime(),e=d.clone().add(1,"days"),f={start:d,end:e};return this.eventsToSegs(c,function(a){return(a=ba(a,f))?[a]:[]})},getMoreLinkText:function(a){var b=this.view.opt("eventLimitText");return"function"===typeof b?b(a):"+"+a+" "+b},getCellSegs:function(a,b){for(var c=this.rowStructs[a.row].segMatrix,d=b||0,e=[],f;d<c.length;)(f=c[d][a.col])&&e.push(f),d++;return e}});var Qa=B.extend({slotDuration:null,
snapDuration:null,minTime:null,maxTime:null,axisFormat:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){B.apply(this,arguments);this.processOptions()},render:function(){this.el.html(this.renderHtml());this.dayEls=this.el.find(".fc-day");this.slatEls=this.el.find(".fc-slats tr");this.computeSlatTops();this.renderBusinessHours();B.prototype.render.call(this)},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=
this.renderFill("businessHours",this.eventsToSegs(a),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(a){return this.bgCellHtml(a)},slatRowHtml:function(){for(var a=this.view,b=this.isRTL,c="",d=0===this.slotDuration.asMinutes()%15,e=p.duration(+this.minTime),f,g;e<this.maxTime;)f=this.start.clone().time(e),g=f.minutes(),f='<td class="fc-axis fc-time '+
a.widgetContentClass+'" '+a.axisStyleAttr()+">"+(d&&g?"":"<span>"+z(f.format(this.axisFormat))+"</span>")+"</td>",c+="<tr "+(g?'class="fc-minor"':"")+">"+(b?"":f)+'<td class="'+a.widgetContentClass+'"/>'+(b?f:"")+"</tr>",e.add(this.slotDuration);return c},processOptions:function(){var a=this.view,b=a.opt("slotDuration"),c=a.opt("snapDuration"),b=p.duration(b),c=c?p.duration(c):b;this.slotDuration=b;this.snapDuration=c;this.minTime=p.duration(a.opt("minTime"));this.maxTime=p.duration(a.opt("maxTime"));
this.axisFormat=a.opt("axisFormat")||a.opt("smallTimeFormat")},computeColHeadFormat:function(){return 1<this.colCnt?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},updateCells:function(){var a=this.view,b=[],c;for(c=this.start.clone();c.isBefore(this.end);)b.push({day:c.clone()}),c.add(1,"day"),c=a.skipHiddenDays(c);this.isRTL&&b.reverse();this.colData=b;this.colCnt=b.length;this.rowCnt=
Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellRange:function(a){var b=this.computeSnapTime(a.row);a=this.view.calendar.rezoneDate(a.day).time(b);b=a.clone().add(this.snapDuration);return{start:a,end:b}},getColEl:function(a){return this.dayEls.eq(a)},computeSnapTime:function(a){return p.duration(this.minTime+this.snapDuration*a)},rangeToSegs:function(a){var b=this.colCnt,c=[],d,e;a={start:a.start.clone().stripZone(),end:a.end.clone().stripZone()};for(e=0;e<b;e++)if(d=this.colData[e].day,
d={start:d.clone().time(this.minTime),end:d.clone().time(this.maxTime)},d=ba(a,d))d.col=e,c.push(d);return c},resize:function(){this.computeSlatTops();this.updateSegVerticals()},computeRowCoords:function(){var a=this.el.offset().top,b=[],c,d;for(c=0;c<this.rowCnt;c++)d={top:a+this.computeTimeTop(this.computeSnapTime(c))},0<c&&(b[c-1].bottom=d.top),b.push(d);d.bottom=d.top+this.computeTimeTop(this.computeSnapTime(c));return b},computeDateTop:function(a,b){return this.computeTimeTop(p.duration(a.clone().stripZone()-
b.clone().stripTime()))},computeTimeTop:function(a){var b=(a-this.minTime)/this.slotDuration,c,b=Math.max(0,b),b=Math.min(this.slatEls.length,b);a=Math.floor(b);b-=a;c=this.slatTops[a];return b?(a=this.slatTops[a+1],c+(a-c)*b):c},computeSlatTops:function(){var a=[],b;this.slatEls.each(function(c,d){b=g(d).position().top;a.push(b)});a.push(b+this.slatEls.last().outerHeight());this.slatTops=a},renderDrag:function(a,b){var c;if(b)return this.renderRangeHelper(a,b),c=this.view.opt("dragOpacity"),void 0!==
c&&this.helperEl.css("opacity",c),!0;this.renderHighlight(this.view.calendar.ensureVisibleEventRange(a))},destroyDrag:function(){this.destroyHelper();this.destroyHighlight()},renderEventResize:function(a,b){this.renderRangeHelper(a,b)},destroyEventResize:function(){this.destroyHelper()},renderHelper:function(a,b){var c=this.eventsToSegs([a]),d,e,f,h,c=this.renderFgSegEls(c);d=this.renderSegTable(c);for(e=0;e<c.length;e++)f=c[e],b&&b.col===f.col&&(h=b.el,f.el.css({left:h.css("left"),right:h.css("right"),
"margin-left":h.css("margin-left"),"margin-right":h.css("margin-right")}));this.helperEl=g('<div class="fc-helper-skeleton"/>').append(d).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(a){this.view.opt("selectHelper")?this.renderRangeHelper(a):this.renderHighlight(a)},destroySelection:function(){this.destroyHelper();this.destroyHighlight()},renderFill:function(a,b,c){var d,e,f,h,l,n,k,p,r;if(b.length){b=this.renderFillSegEls(a,
b);d=this.groupSegCols(b);c=c||a.toLowerCase();e=g('<div class="fc-'+c+'-skeleton"><table><tr/></table></div>');f=e.find("tr");for(h=0;h<d.length;h++)if(l=d[h],n=g("<td/>").appendTo(f),l.length)for(n=g('<div class="fc-'+c+'-container"/>').appendTo(n),k=this.colData[h].day,p=0;p<l.length;p++)r=l[p],n.append(r.el.css({top:this.computeDateTop(r.start,k),bottom:-this.computeDateTop(r.end,k)}));this.bookendCells(f,a);this.el.append(e);this.elsByFill[a]=e}return b}});Qa.mixin({eventSkeletonEl:null,renderFgSegs:function(a){a=
this.renderFgSegEls(a);this.el.append(this.eventSkeletonEl=g('<div class="fc-content-skeleton"/>').append(this.renderSegTable(a)));return a},destroyFgSegs:function(a){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(a){var b=g("<table><tr/></table>"),c=b.find("tr"),d,e,f,h,l;d=this.groupSegCols(a);this.computeSegVerticals(a);for(a=0;a<d.length;a++){f=h=d[a];l=e=e=void 0;f.sort(W);e=f;f=[];var n=l=void 0,k=void 0;for(l=0;l<e.length;l++){n=e[l];
for(k=0;k<f.length&&Ka(n,f[k]).length;k++);n.level=k;(f[k]||(f[k]=[])).push(n)}f=e=f;var p=k=n=l=void 0,r=void 0;for(l=0;l<f.length;l++)for(n=f[l],k=0;k<n.length;k++)for(p=n[k],p.forwardSegs=[],r=l+1;r<f.length;r++)Ka(p,f[r],p.forwardSegs);if(e=e[0]){for(l=0;l<e.length;l++)Ja(e[l]);for(l=0;l<e.length;l++)ja(e[l],0,0)}l=g('<div class="fc-event-container"/>');for(e=0;e<h.length;e++)f=h[e],f.el.css(this.generateSegPositionCss(f)),30>f.bottom-f.top&&f.el.addClass("fc-short"),l.append(f.el);c.append(g("<td/>").append(l))}this.bookendCells(c,
"eventSkeleton");return b},updateSegVerticals:function(){var a=(this.segs||[]).concat(this.businessHourSegs||[]),b;this.computeSegVerticals(a);for(b=0;b<a.length;b++)a[b].el.css(this.generateSegVerticalCss(a[b]))},computeSegVerticals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.top=this.computeDateTop(c.start,c.start),c.bottom=this.computeDateTop(c.end,c.start)},fgSegHtml:function(a,b){var c=this.view,d=a.event,e=c.isEventDraggable(d),f=!b&&a.isEnd&&c.isEventResizable(d),e=this.getSegClasses(a,
e,f),g=this.getEventSkinCss(d),l,n,k;e.unshift("fc-time-grid-event");if(c.isMultiDayEvent(d)){if(a.isStart||a.isEnd)l=this.getEventTimeText(a),n=this.getEventTimeText(a,"LT"),k=this.getEventTimeText({start:a.start})}else l=this.getEventTimeText(d),n=this.getEventTimeText(d,"LT"),k=this.getEventTimeText({start:d.start});return'<a class="'+e.join(" ")+'"'+(d.url?' href="'+z(d.url)+'"':"")+(g?' style="'+g+'"':"")+'><div class="fc-content">'+(l?'<div class="fc-time" data-start="'+z(k)+'" data-full="'+
z(n)+'"><span>'+z(l)+"</span></div>":"")+(d.title?'<div class="fc-title">'+z(d.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(f?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(a){var b=this.view.opt("slotEventOverlap"),c=a.backwardCoord,d=a.forwardCoord,e=this.generateSegVerticalCss(a),f;b&&(d=Math.min(1,c+2*(d-c)));this.isRTL?f=1-d:(f=c,c=1-d);e.zIndex=a.level+1;e.left=100*f+"%";e.right=100*c+"%";b&&a.forwardPressure&&(e[this.isRTL?"marginLeft":"marginRight"]=20);return e},
generateSegVerticalCss:function(a){return{top:a.top,bottom:-a.bottom}},groupSegCols:function(a){var b=[],c;for(c=0;c<this.colCnt;c++)b.push([]);for(c=0;c<a.length;c++)b[a[c].col].push(a[c]);return b}});var M=r.View=E.extend({type:null,name:null,title:null,calendar:null,options:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,
nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(a,b,c){this.calendar=a;this.options=b;this.type=this.name=c;this.nextDayThreshold=p.duration(this.opt("nextDayThreshold"));this.initTheming();this.initHiddenDays();this.documentMousedownProxy=g.proxy(this,"documentMousedown");this.initialize()},initialize:function(){},opt:function(a){var b;b=this.options[a];if(void 0!==b)return b;b=this.calendar.options[a];return g.isPlainObject(b)&&!/(Time|Duration)$/.test(a)?
R(b,this.type):b},trigger:function(a,b){var c=this.calendar;return c.trigger.apply(c,[a,b||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(a){this.setRange(this.computeRange(a))},setRange:function(a){g.extend(this,a)},computeRange:function(a){var b=p.duration(this.opt("duration")||this.constructor.duration||{days:1}),c=ua(b);a=a.clone().startOf(c);var d=a.clone().add(b),e,f;ca("days",b)?(a.stripTime(),d.stripTime()):(a.hasTime()||(a=this.calendar.rezoneDate(a)),d.hasTime()||
(d=this.calendar.rezoneDate(d)));e=a.clone();e=this.skipHiddenDays(e);f=d.clone();f=this.skipHiddenDays(f,-1,!0);return{intervalDuration:b,intervalUnit:c,intervalStart:a,intervalEnd:d,start:e,end:f}},computePrevDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(a,b){this.intervalDuration<=
p.duration({days:1})&&this.isHiddenDay(a)&&(a=this.skipHiddenDays(a,b),a.startOf("day"));return a},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):1<this.intervalDuration.as("days")?"ll":"LL"},
formatRange:function(a,b,c){var d=a.end;d.hasTime()||(d=d.clone().subtract(1));return Da(a.start,d,b,c,this.opt("isRTL"))},renderView:function(){this.render();this.updateSize();this.initializeScroll();this.trigger("viewRender",this,this,this.el);g(document).on("mousedown",this.documentMousedownProxy)},render:function(){},destroyView:function(){this.unselect();this.destroyViewEvents();this.destroy();this.trigger("viewDestroy",this,this,this.el);g(document).off("mousedown",this.documentMousedownProxy)},
destroy:function(){this.el.empty()},initTheming:function(){var a=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=a+"-widget-header";this.widgetContentClass=a+"-widget-content";this.highlightStateClass=a+"-state-highlight"},updateSize:function(a){a&&this.recordScroll();this.updateHeight();this.updateWidth()},updateWidth:function(){},updateHeight:function(){var a=this.calendar;this.setHeight(a.getSuggestedViewHeight(),a.isHeightAuto())},setHeight:function(a,b){},computeScrollerHeight:function(a,
b){var c,d;b=b||this.scrollerEl;c=this.el.add(b);c.css({position:"relative",left:-1});d=this.el.outerHeight()-b.height();c.css({position:"",left:""});return a-d},initializeScroll:function(){},recordScroll:function(){this.scrollerEl&&(this.scrollTop=this.scrollerEl.scrollTop())},restoreScroll:function(){null!==this.scrollTop&&this.scrollerEl.scrollTop(this.scrollTop)},renderViewEvents:function(a){this.renderEvents(a);this.eventSegEach(function(a){this.trigger("eventAfterRender",a.event,a.event,a.el)});
this.trigger("eventAfterAllRender")},renderEvents:function(){},destroyViewEvents:function(){this.eventSegEach(function(a){this.trigger("eventDestroy",a.event,a.event,a.el)});this.destroyEvents()},destroyEvents:function(){},resolveEventEl:function(a,b){var c=this.trigger("eventRender",a,a,b);!1===c?b=null:c&&!0!==c&&(b=g(c));return b},showEvent:function(a){this.eventSegEach(function(a){a.el.css("visibility","")},a)},hideEvent:function(a){this.eventSegEach(function(a){a.el.css("visibility","hidden")},
a)},eventSegEach:function(a,b){var c=this.getEventSegs(),d;for(d=0;d<c.length;d++)b&&c[d].event._id!==b._id||a.call(this,c[d])},getEventSegs:function(){return[]},isEventDraggable:function(a){var b=a.source||{};return K(a.startEditable,b.startEditable,this.opt("eventStartEditable"),a.editable,b.editable,this.opt("editable"))},reportEventDrop:function(a,b,c,d){var e=this.calendar,f=e.mutateEvent(a,b);this.triggerEventDrop(a,f.dateDelta,function(){f.undo();e.reportEventChange()},c,d);e.reportEventChange()},
triggerEventDrop:function(a,b,c,d,e){this.trigger("eventDrop",d[0],a,b,c,e,{})},reportExternalDrop:function(a,b,c,d,e){var f=a.eventProps,h;f&&(f=g.extend({},f,b),h=this.calendar.renderEvent(f,a.stick)[0]);this.triggerExternalDrop(h,b,c,d,e)},triggerExternalDrop:function(a,b,c,d,e){this.trigger("drop",c[0],b.start,d,e);a&&this.trigger("eventReceive",null,a)},renderDrag:function(a,b){},destroyDrag:function(){},isEventResizable:function(a){var b=a.source||{};return K(a.durationEditable,b.durationEditable,
this.opt("eventDurationEditable"),a.editable,b.editable,this.opt("editable"))},reportEventResize:function(a,b,c,d){var e=this.calendar,f=e.mutateEvent(a,{end:b});this.triggerEventResize(a,f.durationDelta,function(){f.undo();e.reportEventChange()},c,d);e.reportEventChange()},triggerEventResize:function(a,b,c,d,e){this.trigger("eventResize",d[0],a,b,c,e,{})},select:function(a,b){this.unselect(b);this.renderSelection(a);this.reportSelection(a,b)},renderSelection:function(a){},reportSelection:function(a,
b){this.isSelected=!0;this.trigger("select",null,a.start,a.end,b)},unselect:function(a){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,a))},destroySelection:function(){},documentMousedown:function(a){var b;this.isSelected&&this.opt("unselectAuto")&&1==a.which&&!a.ctrlKey&&((b=this.opt("unselectCancel"))&&g(a.target).closest(b).length||this.unselect(a))},initHiddenDays:function(){var a=this.opt("hiddenDays")||[],b=[],c=0,d;!1===this.opt("weekends")&&a.push(0,
6);for(d=0;7>d;d++)(b[d]=-1!==g.inArray(d,a))||c++;if(!c)throw"invalid hiddenDays";this.isHiddenDayHash=b},isHiddenDay:function(a){p.isMoment(a)&&(a=a.day());return this.isHiddenDayHash[a]},skipHiddenDays:function(a,b,c){a=a.clone();for(b=b||1;this.isHiddenDayHash[(a.day()+(c?b:0)+7)%7];)a.add(b,"days");return a},computeDayRange:function(a){var b=a.start.clone().stripTime();a=a.end;var c=null,d;a&&(c=a.clone().stripTime(),(d=+a.time())&&d>=this.nextDayThreshold&&c.add(1,"days"));if(!a||c<=b)c=b.clone().add(1,
"days");return{start:b,end:c}},isMultiDayEvent:function(a){a=this.computeDayRange(a);return 1<a.end.diff(a.start,"days")}});r.sourceNormalizers=[];r.sourceFetchers=[];var gb={dataType:"json",cache:!1},hb=1,Ra=J.basic=M.extend({dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new $(this);this.coordMap=this.dayGrid.coordMap},setRange:function(a){M.prototype.setRange.call(this,a);this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit);
this.dayGrid.setRange(a)},computeRange:function(a){a=M.prototype.computeRange.call(this,a);/year|month/.test(a.intervalUnit)&&(a.start.startOf("week"),a.start=this.skipHiddenDays(a.start),a.end.weekday()&&(a.end.add(1,"week").startOf("week"),a.end=this.skipHiddenDays(a.end,-1,!0)));return a},render:function(){this.dayNumbersVisible=1<this.dayGrid.rowCnt;this.weekNumbersVisible=this.opt("weekNumbers");this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible;this.el.addClass("fc-basic-view").html(this.renderHtml());
this.headRowEl=this.el.find("thead .fc-row");this.scrollerEl=this.el.find(".fc-day-grid-container");this.dayGrid.coordMap.containerEl=this.scrollerEl;this.dayGrid.el=this.el.find(".fc-day-grid");this.dayGrid.render(this.hasRigidRows())},destroy:function(){this.dayGrid.destroy();M.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},
headIntroHtml:function(){if(this.weekNumbersVisible)return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+z(this.opt("weekNumberTitle"))+"</span></th>"},numberIntroHtml:function(a){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.dayGrid.getCell(a,0).start)+"</span></td>"},dayIntroHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number '+this.widgetContentClass+
'" '+this.weekNumberStyleAttr()+"></td>"},introHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"},numberCellHtml:function(a){a=a.start;var b;if(!this.dayNumbersVisible)return"<td/>";b=this.dayGrid.getDayClasses(a);b.unshift("fc-day-number");return'<td class="'+b.join(" ")+'" data-date="'+a.format()+'">'+a.date()+"</td>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},
hasRigidRows:function(){var a=this.opt("eventLimit");return a&&"number"!==typeof a},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=qa(this.el.find(".fc-week-number")))},setHeight:function(a,b){var c=this.opt("eventLimit"),d;aa(this.scrollerEl);oa(this.headRowEl);this.dayGrid.destroySegPopover();c&&"number"===typeof c&&this.dayGrid.limitRows(c);d=this.computeScrollerHeight(a);this.setGridHeight(d,b);c&&"number"!==typeof c&&this.dayGrid.limitRows(c);!b&&ra(this.scrollerEl,d)&&
(na(this.headRowEl,ta(this.scrollerEl)),d=this.computeScrollerHeight(a),this.scrollerEl.height(d),this.restoreScroll())},setGridHeight:function(a,b){b?this.dayGrid.rowEls.height(""):pa(this.dayGrid.rowEls,a,!0)},renderEvents:function(a){this.dayGrid.renderEvents(a);this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},destroyEvents:function(){this.recordScroll();this.dayGrid.destroyEvents()},renderDrag:function(a,b){return this.dayGrid.renderDrag(a,b)},destroyDrag:function(){this.dayGrid.destroyDrag()},
renderSelection:function(a){this.dayGrid.renderSelection(a)},destroySelection:function(){this.dayGrid.destroySelection()}});la({fixedWeekCount:!0});(J.month=Ra.extend({computeRange:function(a){a=Ra.prototype.computeRange.call(this,a);var b;this.isFixedWeeks()&&(b=Math.ceil(a.end.diff(a.start,"weeks",!0)),a.end.add(6-b,"weeks"));return a},setGridHeight:function(a,b){(b=b||"variable"===this.opt("weekMode"))&&(a*=this.rowCnt/6);pa(this.dayGrid.rowEls,a,!b)},isFixedWeeks:function(){var a=this.opt("weekMode");
return a?"fixed"===a:this.opt("fixedWeekCount")}})).duration={months:1};J.basicWeek={type:"basic",duration:{weeks:1}};J.basicDay={type:"basic",duration:{days:1}};la({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0});J.agenda=M.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new Qa(this);this.opt("allDaySlot")?(this.dayGrid=
new $(this),this.coordMap=new mb([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap},setRange:function(a){M.prototype.setRange.call(this,a);this.timeGrid.setRange(a);this.dayGrid&&this.dayGrid.setRange(a)},render:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml());this.scrollerEl=this.el.find(".fc-time-grid-container");this.timeGrid.coordMap.containerEl=this.scrollerEl;this.timeGrid.el=this.el.find(".fc-time-grid");this.timeGrid.render();this.bottomRuleEl=
g('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el);this.dayGrid&&(this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight());this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},destroy:function(){this.timeGrid.destroy();this.dayGrid&&this.dayGrid.destroy();M.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+
'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var a,b;return this.opt("weekNumbers")?(a=this.timeGrid.getCell(0).start,a=this.calendar.calculateWeekNumber(a),b=this.opt("weekNumberTitle"),a=this.opt("isRTL")?a+b:b+a,'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+
'" '+this.axisStyleAttr()+"><span>"+z(a)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||z(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+
"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(a){a&&this.timeGrid.resize();M.prototype.updateSize.call(this,a)},updateWidth:function(){this.axisWidth=qa(this.el.find(".fc-axis"))},setHeight:function(a,b){var c;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight());this.bottomRuleEl.hide();this.scrollerEl.css("overflow","");aa(this.scrollerEl);oa(this.noScrollRowEls);this.dayGrid&&(this.dayGrid.destroySegPopover(),
(c=this.opt("eventLimit"))&&"number"!==typeof c&&(c=5),c&&this.dayGrid.limitRows(c));b||(c=this.computeScrollerHeight(a),ra(this.scrollerEl,c)?(na(this.noScrollRowEls,ta(this.scrollerEl)),c=this.computeScrollerHeight(a),this.scrollerEl.height(c),this.restoreScroll()):(this.scrollerEl.height(c).css("overflow","hidden"),this.bottomRuleEl.show()))},initializeScroll:function(){function a(){b.scrollerEl.scrollTop(d)}var b=this,c=p.duration(this.opt("scrollTime")),d=this.timeGrid.computeTimeTop(c);(d=Math.ceil(d))&&
d++;a();setTimeout(a,0)},renderEvents:function(a){var b=[],c=[],d;for(d=0;d<a.length;d++)a[d].allDay?b.push(a[d]):c.push(a[d]);this.timeGrid.renderEvents(c);this.dayGrid&&this.dayGrid.renderEvents(b);this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},destroyEvents:function(){this.recordScroll();this.timeGrid.destroyEvents();this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(a,b){if(a.start.hasTime())return this.timeGrid.renderDrag(a,
b);if(this.dayGrid)return this.dayGrid.renderDrag(a,b)},destroyDrag:function(){this.timeGrid.destroyDrag();this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(a){a.start.hasTime()||a.end.hasTime()?this.timeGrid.renderSelection(a):this.dayGrid&&this.dayGrid.renderSelection(a)},destroySelection:function(){this.timeGrid.destroySelection();this.dayGrid&&this.dayGrid.destroySelection()}});J.agendaWeek={type:"agenda",duration:{weeks:1}};J.agendaDay={type:"agenda",duration:{days:1}}});